# POS CRM Backend

Backend API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–µ–π (Point of Sale CRM) –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ NestJS —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Prisma ORM –∏ PostgreSQL.

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL —Å –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π —Å—Ö–µ–º–æ–π, –≤–∫–ª—é—á–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π, —Ç–æ–≤–∞—Ä—ã —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ú–æ–π–°–∫–ª–∞–¥, –ø—Ä–æ–¥–∞–∂–∏ —Å –±–æ–Ω—É—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º–∏.

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- **–ó–∞—è–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: —Å—Ç–∞—Ç—É—Å—ã PENDING ‚Üí APPROVED/REJECTED/SUSPENDED
- **–ú—É–ª—å—Ç–∏—Ä–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π
- **Soft delete**: –ø–æ–ª–µ `deletedAt` –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- **–ê—É–¥–∏—Ç**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ `lastLoginAt`, —Å–≤—è–∑—å —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º–∏

#### Role (–†–æ–ª–∏) + Permission (–ü—Ä–∞–≤–∞)
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∞**: –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∞–≤**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –º–æ–¥—É–ª—è–º (products, sales, users, reports)
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏**: `isSystem = true` - –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å
- **–°–≤—è–∑–∏**: Role ‚Üî Permission —á–µ—Ä–µ–∑ RolePermission (many-to-many)

```sql
-- –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
products.view, products.create, products.edit, products.delete
sales.view, sales.create, sales.cancel, sales.refund
bonuses.view, bonuses.accrual, bonuses.spending, bonuses.adjustment
```

#### Session (–°–µ—Å—Å–∏–∏)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (IP, User-Agent)
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –∏—Å—Ç–µ–∫—à–∏–µ —Ç–æ–∫–µ–Ω—ã

### üì¶ –¢–æ–≤–∞—Ä—ã –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### Product (–¢–æ–≤–∞—Ä—ã)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ú–æ–π–°–∫–ª–∞–¥**: –ø–æ–ª—è `moyskladId`, `moyskladUpdatedAt`
- **–ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: `bonusPercent` (% –æ—Ç —Å—É–º–º—ã) –∏–ª–∏ `bonusFixed` (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞)
- **–í–µ—Å–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã**: —Ñ–ª–∞–≥ `isWeighted` –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –≤–µ—Å
- **–°–µ—Ä–∏–π–Ω—ã–µ –Ω–æ–º–µ—Ä–∞**: —Ñ–ª–∞–≥ `hasSerialNumbers` + —Å–≤—è–∑—å —Å ProductSerial
- **–°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç**: `stock`, `minStock`, `maxStock`
- **–§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**: `weight`, `volume`

#### ProductSerial (–°–µ—Ä–∏–π–Ω—ã–µ –Ω–æ–º–µ—Ä–∞)
- **–°—Ç–∞—Ç—É—Å—ã**: AVAILABLE, SOLD, RESERVED, DEFECTIVE
- **–¢—Ä–µ–∫–∏–Ω–≥**: —Å–≤—è–∑—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–æ–¥–∞–∂–µ–π

#### Category (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)
- **–ò–µ—Ä–∞—Ä—Ö–∏—è**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ `parentId`
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**: –ø–æ–ª–µ `sortOrder`

### üí∞ –ü—Ä–æ–¥–∞–∂–∏

#### Sale (–ü—Ä–æ–¥–∞–∂–∏)
- **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã**:
  - `subtotal` - —Å—É–º–º–∞ –±–µ–∑ —Å–∫–∏–¥–æ–∫
  - `discountAmount` - —Ä–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏
  - `bonusUsed` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã
  - `total` - –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ
  - `paidAmount` - –ø–æ–ª—É—á–µ–Ω–æ –¥–µ–Ω–µ–≥
  - `changeAmount` - —Å–¥–∞—á–∞

- **–°—Ç–∞—Ç—É—Å—ã**: ACTIVE, CANCELLED, REFUNDED
- **–°–≤—è–∑–∏**: –∫–ª–∏–µ–Ω—Ç, –∫–∞—Å—Å–∏—Ä, —Ç–µ—Ä–º–∏–Ω–∞–ª
- **Soft delete**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

#### SaleItem (–ü–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂–∏)
- **–í–µ—Å–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã**: `quantity` –∫–∞–∫ Decimal –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥—Ä–æ–±–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏**: —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
- **–°–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `productName`, `productSku` –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂–∏

#### SalePayment (–ü–ª–∞—Ç–µ–∂–∏)
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**: CASH, CARD, BANK_TRANSFER, DIGITAL_WALLET, BONUS, MIXED
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: `cardLast4` –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 4 —Ü–∏—Ñ—Ä –∫–∞—Ä—Ç—ã
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: `transactionId` –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### üè¢ –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã (–¢–µ—Ä–º–∏–Ω–∞–ª—ã)

#### Counterparty (–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã)
- **–¢–∏–ø—ã**: TERMINAL (POS —Ç–µ—Ä–º–∏–Ω–∞–ª), WAREHOUSE, SUPPLIER, OTHER
- **–†–µ–∫–≤–∏–∑–∏—Ç—ã**: –ò–ù–ù, –ö–ü–ü –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞**: JSON –ø–æ–ª–µ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
```json
{
  "printReceipts": true,
  "allowDiscount": true,
  "maxDiscountPercent": 20,
  "workingHours": {
    "start": "09:00",
    "end": "21:00"
  }
}
```

#### CounterpartyUser (–ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º)
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö

### üë• –ö–ª–∏–µ–Ω—Ç—ã –∏ –±–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

#### Customer (–ö–ª–∏–µ–Ω—Ç—ã)
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –§–ò–û, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∞–¥—Ä–µ—Å, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- **–ë–∞–ª–∞–Ω—Å –±–æ–Ω—É—Å–æ–≤**: `bonusBalance` —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –∫–æ–ø–µ–π–∫–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**: `allowSms`, `allowEmail`

#### BonusTransaction (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–æ–Ω—É—Å–æ–≤)
- **–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π**:
  - `ACCRUAL` - –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ø–æ–∫—É–ø–∫—É
  - `SPENDING` - —Ç—Ä–∞—Ç–∞ –±–æ–Ω—É—Å–æ–≤
  - `ADJUSTMENT` - —Ä—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
  - `EXPIRATION` - —Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é —Å—Ä–æ–∫–∞

- **–ê—É–¥–∏—Ç**: –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`balanceAfter`)
- **–°–≤—è–∑–∏**: –∫–ª–∏–µ–Ω—Ç, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ (–∫—Ç–æ –ø—Ä–æ–≤–µ–ª), –ø—Ä–æ–¥–∞–∂–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```bash
cp .env.example .env
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –≤ `.env`:
```
DATABASE_URL="postgresql://username:password@localhost:5432/pos_crm_db?schema=public"
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞
npm run db:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫ –ë–î
npm run db:push

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω
npm run build
npm run start:prod
```

## üìã –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Seed)

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `npm run db:seed` –≤ –±–∞–∑–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

### –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- **–ú–µ–Ω–µ–¥–∂–µ—Ä** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –æ—Ç—á–µ—Ç–∞–º–∏
- **–ö–∞—Å—Å–∏—Ä** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–∂–∏ –∏ –±–∞–∑–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: admin@pos-crm.local / admin123
- **–¢–µ—Ä–º–∏–Ω–∞–ª**: "–ì–ª–∞–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª"
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è, –ù–∞–ø–∏—Ç–∫–∏, –•–æ–∑—Ç–æ–≤–∞—Ä—ã, –ö–æ—Å–º–µ—Ç–∏–∫–∞
- **–¢–æ–≤–∞—Ä—ã**: 4 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–∞ —Å —à—Ç—Ä–∏—Ö–∫–æ–¥–∞–º–∏
- **–ö–ª–∏–µ–Ω—Ç**: test@customer.local —Å –±–æ–Ω—É—Å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º 150‚ÇΩ

## üîß API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /auth/logout` - –í—ã—Ö–æ–¥
- `GET /auth/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü—Ä–æ–¥–∞–∂–∏
- `GET /sales` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂
- `POST /sales` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏
- `GET /sales/:id` - –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–¥–∞–∂–∏
- `POST /sales/:id/cancel` - –û—Ç–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
- `POST /sales/:id/refund` - –í–æ–∑–≤—Ä–∞—Ç

### –¢–æ–≤–∞—Ä—ã
- `GET /products` - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
- `POST /products` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `PUT /products/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `DELETE /products/:id` - –£–¥–∞–ª–µ–Ω–∏–µ (soft delete)

### –ë–æ–Ω—É—Å—ã
- `GET /customers/:id/bonuses` - –ò—Å—Ç–æ—Ä–∏—è –±–æ–Ω—É—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
- `POST /bonuses/accrual` - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
- `POST /bonuses/spending` - –°–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤

## üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### Guard'—ã
- `JwtAuthGuard` - –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞
- `RolesGuard` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PermissionsGuard` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∞–≤

### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
```typescript
@Permissions('products.create', 'products.edit')
@UseGuards(JwtAuthGuard, PermissionsGuard)
async createProduct() { ... }
```

## üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ú–æ–π–°–∫–ª–∞–¥
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ `moyskladId`
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –ø–æ –∞—Ä—Ç–∏–∫—É–ª—É/—à—Ç—Ä–∏—Ö–∫–æ–¥—É

### –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `transactionId` –¥–ª—è —Å–≤–µ—Ä–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã)

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ auth/           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ users/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ roles/          # –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤
‚îú‚îÄ‚îÄ products/       # –¢–æ–≤–∞—Ä—ã –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ sales/          # –ü—Ä–æ–¥–∞–∂–∏ –∏ –ø–æ–∑–∏—Ü–∏–∏
‚îú‚îÄ‚îÄ customers/      # –ö–ª–∏–µ–Ω—Ç—ã –∏ –±–æ–Ω—É—Å—ã
‚îú‚îÄ‚îÄ counterparties/ # –¢–µ—Ä–º–∏–Ω–∞–ª—ã –∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ reports/        # –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ integrations/   # –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–ú–æ–π–°–∫–ª–∞–¥)
‚îî‚îÄ‚îÄ common/         # –û–±—â–∏–µ –º–æ–¥—É–ª–∏ (guards, decorators, pipes)
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ `/api`
- Health check –Ω–∞ `/health`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 